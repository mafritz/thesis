# A Parsimonious Computational Model Linking Appraisal and Subjective Feeling

```{r computational-model-setup, include=FALSE, echo=FALSE}
library(tidyverse)
library(papaja)
library(here)
library(knitr)
library(kableExtra)

# Load the relevant data and graphs
source(here("data", "dew-rt", "dew-rt-export.R"))

```

This chapter illustrates a parsimonious computational model inspired by the Component Process Model (CPM) theoretical framework that links appraisals criteria and subjective feeling. As a reminder, appraisals criteria in appraisal theories of emotions -- and the CPM more specifically -- are cognitive evaluation of an event, which determine emotion elicitation and differentiation. The subjective feeling, on the other hand, is the result of a highly dynamic and cumulative process, instantiated by appraisal, that coalesces in an overall emotional experience, from which the person may extrapolate meaning by recurring to natural language words or idioms that best convey its ineffable nature. In previous works, I have set forth the foundations of a prototype of an EAT, named *Dynamic Emotion Wheel* for its relationship with the Geneva Emotion Wheel illustrated in Part I of the thesis, which already explored the possibility to use active ratings of appraisal criteria to determine a set of subjective feelings most likely to occur, given the specific evaluation of the appraisal criteria. Previous work was nevertheless mainly driven by usability concerns emerged in empirical contributions using a provisional EAT [@molinariEmotionFeedbackComputermediated2013]. As it is often the case with usability issues, though, they were only the tip of the iceberg of more fundamental issues to be addressed, which initialized the quest for a better concept of an EAT. This chapter therefore builds on previous work in an attempt to bring an EAT even closer to appraisal theories of emotion, and the CPM more specifically.

The chapter starts by briefly describing previous work on the Dynamic Emotion Wheel. Then, it extends on it by implementing a *k-nearest neighbor* approach to the relationship between appraisals and subjective feeling. Harnessing the abstract concept of an *N-dimensional* affective space, a parsimonious computational model can link one or more appraisal criteria with a set of subjective feelings that ar most likely to correspond with the specific appraisal profile. While presenting the abstract model, existing affective spaces will be used to illustrate the concept in more concrete terms. At the end of the chapter, the core principle of an appraisal-driven EAT will emerge, paving the way to the possibility of configuring it according to theoretical or practical needs.

## The Dynamic Emotion Wheel

During the Master of Science in Learning and Teaching Technologies at Geneva University between 2013 and 2015, I had the chance to collaborate to the *Emotion Awareness Tool for Computer-Mediated Interactions* (EATMINT) project, which at the time had just concluded empirical investigation on the use of Emotional Awareness Tools in computer-mediated collaboration -- which then led to several publications [*e.g.*, @cereghettiSharingEmotionsComputermediated2015; @Chanel2013; @molinariEmotionFeedbackComputermediated2013]. The project had two intertwined main objectives:

1. Designing Emotion Awareness Tools, which allow either the explicit or the autonomic sharing of
emotions among participants in a computer-mediated task;
2. Studying the impact of emotional awareness on collaboration both at intra- and inter-personal
levels, with respect to the emergence of strategies that improve collaboration such as monitoring,
regulating and reflecting on emotions.

Description of the DEW.


## A Parsimonious Computational Model Based on a *K-Nearest Neighbor* Approach

The bi-dimensional mechanism of the DEW can be abstracted according to the working definition of emotion provided by @mulliganWorkingDefinitionEmotion2012, specifically the points about appraisals: (a) an emotion *is triggered by at least one appraisal*, and (2) an emotion *is guided by at least one appraisal*. To ease the illustration of the parsimonious computational model, the section adopts the following notation:

* $E$ stands for *Appraisal **E**valuation*, that is, the hypothetical value that a cognitive evaluation can have on a given set of appraisal criteria $E_1$, $E_2$, ..., $E_n$. In concrete terms, $E$ represents the rating of a person asked to evaluate one or more appraisal dimensions. For instance, if there was only one appraisal, say, *Novelty*, than $E$ assumes a value determined by the extent to which the person evaluates the event as sudden, familiar or unpredictable on $E_1$.
* $P$ stands for *Subjective Feeling **P**redicted Appraisal*, that is, the predicted appraisal profile associated with a given subjective feeling, with subscripts $S_1$, $S_2$, ..., $S_n$ representing a set of $n$ predicted appraisal criteria In concrete terms, $P$ represents the appraisal profile that is supposed to elicit the given subjective feeling. For instance, the CPM predicts that a subjective feeling represented by the word *Happiness* may be related to a higher evaluation on appraisal *Novelty* compared to a subjective feeling represented by the word *Sadness* [@schererComponentProcessModel2010].
* As a consequence, $d(E, P)$ represents the distance between the Appraisal Evaluation and the Subjective Feeling Predicted Appraisal, with the *k-nearest neighbors* being the *k* subjective feelings with the lowest $d(E, P)$. In other words, if $k=5$, then, among all the subjective feelings in the affective space, the 5 whose appraisal profile $P$ is closer to the appraisal evaluation $E$ represent the subset of most likely subjective feelings to occur, given the *mysterious* point $E$, which is provided by the person cognitive evaluation. 

The following subsections illustrates how the distance $d(E, P)$ is calculated by the model depending on the number of appraisal criteria/dimensions composing the underlying affective space: one-dimensional, two-dimensional, or multi-dimensional. The presence of a specific section on a two-dimensional affective space, which is in fact the first multi-dimensional condition, is due to the possibility of interpreting the affective space either as a circumplex or as a Cartesian plane, which require a slightly different computation.

### One-Dimensional Affective Space

In a one-dimensional affective space, that is, where there is only a single appraisal criterion, the nearest neighbors are determined by the absolute distance between $E$ and $P$:

$$
d(E, P) = |E_1 - S_1|
$$

One-dimensional affective space are not usually defined as such in the literature, even though the possibility to conceptualize emotion on a single dimension is not infrequent, especially when this dimension represents an omnibus *valence* that often divides emotion in positive and negative. The possibility to use a one-dimensional affective space is therefore warranted by the working definition itself (*i.e.*, *at least one appraisal*), as well as by researchers and practitioners habit to recur to a dichotomous affective space, even though the actual rating may be implicit rather than explicit, for instance in grouping forced choices [@molinariEmotionFeedbackComputermediated2013].

The possibility to restrain the affective space to a single dimension may also be useful in situations where researchers or practitioners are interested specifically in the assessment of only one criterion, avoiding thus the mediation or moderation effects of additional criterion. For instance, if one is interested in the *normative significance*, more specifically with respect to *external standards* -- whether the event violated laws or socially accepted norms [@schererWhatAreEmotions2005] -- the presence of another appraisal criteria such as *valence*, may influence that evaluation. For example, negatively valenced emotion may be considered less socially acceptable [@vankleefInterpersonalDynamicsEmotion2018]. The presence of an explicit reminder of the valence could therefore mediate or moderate the rating of the external standard of normative significance.

### Two-Dimensional Affective Space

Two-dimensional, or bi-dimensional, affective spaces are ubiquitous in research, especially in the form of the dimensional *valence x arousal* circumplex [@russellCircumplexModelAffect1980], but also in appraisal-driven perspectives, as in Pekrun's control-value theory of achievement emotions [@pekrunControlValueTheoryAchievement2006; @pekrunControlValueTheoryAchievement2014] or the *valence x control/power* structure of the Geneva Emotion Wheel [@schererGRIDMeetsWheel2013; @schererWhatAreEmotions2005]. Several scholars have theoretically adopted two-dimensional affective spaces in their research, but also as graphical representations for self-report/awareness tools [*e.g.*, @feidakisEndowingElearningSystems2011]. Consequently, it is important that an overarching computational model can manage to incorporate different kinds of two-dimensional affective spaces. In this regard, an affective space based on two dimensions can be interpreted as the sum of a pair of one-dimensional continuous spaces, in which case each subjective feeling is determined by a precise coordinate in a Cartesian plane. Alternatively, it may also be interpreted, less stringently, as a circumplex where each subjective feeling is positioned at an equal distance from the origin. The two interpretation of a two-dimensional affective space requires different computational models from a *k-nearest neighbors* perspectives. This subsection first illustrates the computational model for a Cartesian plane, and then for a circumplex. Last, it compares the two computational models in a simulation using the same affective space depicted either as a Cartesian plane or a circumplex.

#### Cartesian Plane Affective Space

When a second appraisal criteria is added, the resulting affective space can be conceptualized as a Cartesian plane, in which $P$ is represented by the coordinates $x = P_1$, and $y = P_2$. At the same time, the appraisal evaluation is also determined by coordinates $x = E_1$ and $y = E_2$. Consequently, the *k-nearest neighbors* may be determined using the Euclidean (or Pythagorean) distance, with the nearest subjective feelings having the smallest hypotenuse of a triangle with the length of the sides determined by the difference between $E_1$ and $P_1$, and $E_2$ and $P_2$:

$$
d(E, P) = \sqrt{(E_1 - P_1)^2 + (E_2 - P_2)^2}
$$

#### Circumplex Affective Space

An alternative for two-dimensional affective spaces consists in the use of a circumplex, a representation that is mainly linked with the concept of core-affect emerging from a *valence x arousal* space in constructivist/dimensional emotion theories [@russellCoreAffectPsychological2003; @russellEmotionCoreAffect2009; @stanleyTwodimensionalAffectiveSpace2009]. The structure itself, though, may also be adopted in other contexts, since a circumplex allows researchers to dispose multiple variables on a circle, so that the similarity between two items is inversely proportional to their distance on the circumference: the less the distance, the more the two elements are similar or correlated. The circumplex is determined by an x-axis and a y-axis, usually delimited by opposite poles of the same constructs (*e.g.*, pleasant/unpleasant) or two constructs in antithesis (*e.g.* sadness/enthusiasm). The combination of the two axes creates four quadrants, usually crossing over the negative and positive poles of the two axes. The top-right quadrant is x-positive and y-positive; the bottom-right quadrant is x-positive and y-negative; the bottom-left quadrant is x-negative and y-negative; and the top-left quadrant is x-negative and y-positive. 

Given its practical structure, a circumplex ca be used to dispose subjective feelings determined by two appraisals criteria in a more *relaxed* way compared to a Cartesian plane. In fact, researchers can tentatively dispose items at an equal distance from each other, assuming the order of disposition on the circle as a sufficient connotation of the affective space. Since the computational model, though, does not use the circumplex as a graphical representation, but rather as a *database* to retrieve suggestions, the fact that subjective feelings are not equally spaced on the circumference is irrelevant from a usability standpoint. As a consequence, it is also possible to adopt circumplexes with overlapping subjective feelings, or where the distance between any two items on the circle is not necessarily the same, but rather a function of some theoretical or practical mechanism.

On the other hand, the use of a circumplex as the underlying affective space requires a slightly different approach in computing the distance between $E$ and $P$, because $P$ in a circumplex is best conveyed as an angle, so that $P_{angle} \in \mathbb{R} : 0 \le P_{angle} \le 360$. A possible solution is to use $E_1$ and $E_2$ as points in a Cartesian plane, and compute the slope from the origin [0,0] of the plane. The slope can then be used to retrieve the angle from the x-axis, using the inverse tangent, or arctangent, trigonometric function, and -- with some correction skipped here, see Fritz (2015) or the code repository for more details -- also obtain an $E_{angle} \in \mathbb{R} : 0 \le E_{angle} \le 360$:

$$
E_{angle} = arctan(\frac{E_1 - 0}{E_2 - 0}) + correction = arctan(\frac{E_1}{E_2}) + correction
$$

Once retrieved the $E_{angle}$, the *k-nearest neighbors* can be determined using the same logic as in a uni-dimensional condition, by computing the absolute distance between $E_{angle}$ and $P_{angle}$:

$$
d(E, P) = |E_{angle} - P_{angle}|
$$
Conceptually, with this solution, it is worth considering the case when both $E_1$ and $E_2$ are at the neutral point 0, since $d(E, P)$ is exactly the same for every subjective feeling, since any point on a circle is at the same distance from the origin. In other words, any subjective feeling is as likely to represent the neutral point as any other. When both $E_1$ and $E_2$ are 0, thus, the computational model attributes a virtual random value both to $E_1$ and $E_2$ only with the purpose to shuffle the set of subjective feelings and avoid thus that some subjective feelings are arbitrarily suggested more frequently with the neutral point.

#### Comparison

Taking advantage of the fact that the disposition of the 20 subjective feelings in the third version of the Geneva Emotion Wheel [@schererGRIDMeetsWheel2013] has been determined using the GRID instrument, the same affective space is available as a circumplex and as Cartesian plane. As a consequence, it is possible to simulate the behavior of the computational model. For the purpose of the simulation, the following parameters will be adopted:

* The two appraisal dimensions (Valence and Control/Power) are implemented on a continuum ranging from -100 to 100, divied in steps of 1 unit;
* The *k*-nearest neighbors is set to $k = 3$ and to $k = 10$ to assess how the radial and the vector algorithms behave when the number of suggested feelings varies;
* The subjective feelings in the circumplex affective space are disposed so that each is equally distant from the previous and the following item, with a rotation of half the distance between each subjective feeling to respect the graphical representation of the circumplex, see the righ side of Figure \@ref(fig:pof-gew-radial-vs-vector);
* The subjective feelings in the Cartesian plan are disposed according to the values retrieved from data retrieved in @schererGRIDMeetsWheel2013, see the left side of Figure \@ref(fig:pof-gew-radial-vs-vector). The original value on a range from -1 to 1 has been multiplied by 100 to map the range of the simulation.

(ref:pof-gew-radial-vs-vector-caption) Disposition of the Geneva Emotion Wheel's 20 subjective feeling on a circumplex (left) and Cartesian plane (right) affective space. Reconstructed from @schererGRIDMeetsWheel2013.
```{r pof-gew-radial-vs-vector, fig.align="center", fig.cap="(ref:pof-gew-radial-vs-vector-caption)", fig.align="center", out.width="100%"}
knitr::include_graphics(here("figure/dew-rt/gew-radial-vs-vector.png"))
```

The simulation is computed by looping the $E_1$ and $E_2$ ranges so that each possible combination between the two -- that is, [-100, -100], [-100, -99], ..., [0, 0], ..., [100, 100] -- generates a subset of $k = 3$ or $k = 10$ subset of subjective feelings. Figure \@ref(fig:pf-simulation-3) and  \@ref(fig:pf-simulation-3) show the results of the simulation. With a $k = 3$ subset, the radial distance of the circumplex shows a more homogeneous number of appearances of each subjective feeling in the subset compared to the vector distance of the Cartesian plane. The opposite happens with $k = 10$, where the vector distance results in more homogeneous number of appearances compared to the radial distance.

(ref:pof-simulation-3-caption) Results of the simulation comparing distance computed as a radial or vector distance with a subset of $k = 3$ subjective feelings.
```{r pf-simulation-3, fig.align="center", fig.cap="(ref:pof-simulation-3-caption)", fig.align="center", out.width="70%"}
dew_rt.sim_gew_graph_3
```

(ref:pof-simulation-10-caption) Results of the simulation comparing distance computed as a radial or vector distance with a subset of $k = 10$ subjective feelings.
```{r pof-simulation-10, fig.align="center", fig.cap="(ref:pof-simulation-10-caption)", fig.align="center", out.width="70%"}
dew_rt.sim_gew_graph_10
```

This simulation has only illustrative purpose, because the two affective spaces are only examples of an infinite number of spaces that can be conceived and therefore results may be very different with other configuration. Nevertheless, this kind of simulation may be interesting to carry out before adopting an affective space (see next chapter) to assess whether there are subjective feelings that are more likely to be suggested by the system, because that could influence learners in choosing them.

### Multi-Dimensional Affective Space

There is growing empirical evidence in suggesting that one- and two-dimensional affective spaces are not enough to account for the variety of emotional experiences in semantic terms [@fontaineWorldEmotionsNot2007; @gilliozMappingEmotionTerms2016]. As a consequence, an overarching computational model should be able to integrate higher-order dimensional spaces, where the number of dimensions can be determined by researchers and practitioners with respect to theoretical, practical, or usability criteria (*e.g.*, if the moment-to-moment temporal dimension is particularly important, asking learners to repeatedly rate a high number of criteria would be very time consuming).

Extending the model to more than two dimensions is relatively straightforward when the Euclidean distance is maintained as the algorithm to determine the *k-nearest neighbors*. In fact, the it is possible to determine the distance between any two points in a multidimensional space, simply by adding additional dimensions to the Pythagorean formula:

$$
d(E, P) = \sqrt{(E_1- P_1)^2 + (E_2 - P_2)^2+\cdots+(E_n - P_n)^2}
$$

The model therefore remains fairly limited in term of computational power required, even if the number of dimensions increases. The difficulty with a higher-order affective spaces is in fact more theoretical than practical, since it is more difficult to imagine a space with three or more dimensions. Beyond three dimensions, it is even difficult to represent the space graphically, which contrasts with the easy-to-understand, and easy-to-implement disposition of subjective feelings in a circumplex. At the same time, the *k-nearest neighbor* approach can precisely contribute to overcome this issue, once a multi-dimensional affective space is established, since the dimensions are *flattened* on uni-dimensional ratings. The computational model is then in charge of mapping uni-dimensional ratings into multi-dimensional distances, as vectors between points in spaces the human mind can hardly imagine from a spatial point of view. 

For instance, Gillioz and colleagues [-@gilliozMappingEmotionTerms2016] adopted the GRID instrument -- in its shorter CoreGRID version [@schererCoreGRIDMiniGRIDDevelopment2013] -- to assess the mapping of 80 emotion terms in an affective space. The authors found evidence, corroborating previous findings on a smaller set of emotion terms [@fontaineComponentsEmotionalMeaning2013; @fontaineWorldEmotionsNot2007], attesting the presence of a four-dimensional affective space, composed by *valence*, *power*, *arousal*, and *novelty*. The number of dimensions and of emotion terms composing the affective space empirically established by the authors is a representative example of how a parsimonious computational model could be deployed in a self-report instrument, allowing users to benefit of all the dimensions and all the suggested emotion terms.

## Synthesis

This chapter illustrated a parsimonious computational model that allows to regroup affective spaces expressed on multiple dimension into the same abstract functioning, harnessing a *k*-neares neihbors approach.

