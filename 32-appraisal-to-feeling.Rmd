---
bibliography: references.bib
---

# A Parsimonious Computational Model Linking Appraisal and Subjective Feeling {#computational-model}

```{r computational-model-setup, include=FALSE, echo=FALSE}
library(tidyverse)
library(papaja)
library(here)
library(knitr)
library(kableExtra)

# Load the relevant data and graphs
source(here("data", "dew-rt", "dew-rt-export.R"), local = knitr::knit_global(), encoding = "UTF-8")

```

This chapter illustrates the parsimonious computational model that is at the core of the Dynamic Emotion Wheel. It uses the probabilistic link between the cognitive evaluation of the situation and the resulting holistic experience, the subjective feeling, that can be lexicalized in natural language words or idioms. As stated in the theoretical extension of the DEW in section \@ref(dew-theoretical-extension), bi-dimensional affective spaces are based on theoretical ground, but also practical considerations: it is the greatest number of dimensions that can be easily interpreted in a graphical representation. Since the interface of the DEW *flattens* the affective space in one-dimensional sliders, the number of affective dimensions can scale up and down according to the structure of the underlying theoretical and/or empirically validated *reference frame*. This chapter, of a more technical nature, depicts the inner functioning of the *dynamic* aspect of the DEW, which consists in implementing a *k-nearest neighbor* approach to the relationship between appraisals and subjective feeling. Harnessing the abstract concept of an *N-dimensional* affective space, a parsimonious computational model can link one or more appraisal criteria (or dimensions more broadly) with a set of subjective feelings that ar most likely to correspond with the specific evaluation of the situation. While presenting the abstract model, existing affective spaces will be used to illustrate the concept in more concrete terms. At the end of the chapter, the core principle of an appraisal-driven EAT will emerge, paving the way to the possibility of configuring it according to theoretical or practical needs.

## The Rationale Behind N-Dimensional Affective Spaces

As the use of the EATMINT circumplex depicted in Section \@ref(eatmint-circumplex) has shown, it is possible to adapt the underlying reference frame that provides the appraisal dimensions and subjective feelings, and is also used as a *reference frame* for the dynamic computational model.The use of a bi-dimensional circumplex, though, was driven mainly by the familiarity and widespread use of the graphical representation in the literature and other self-report tools, such as the Geneva Emotion Wheel. Nevertheless, once the graphical user interface of the Dynamic Emotion Wheel breaks the correspondence between the affective space and the self-report tool, than a circumplex becomes one *reference frame* among others. In other words, the circumplex determines only the underlying theoretical and/or empirically validated affective space, but not the interface of the tool. This fact has several consequences.

First, the tool is not constrained by the two-dimensional structure, which is also partially so popular because it is the higher-dimensional structure that can be easily represented on a screen or sheet of paper. A tri-dimensional representation of an affective space would already be much more difficult to represent graphically. On the contrary, a tri-dimensional affective space would be translated by the Dynamic Emotion Wheel simply by a third slider on the interface. In other words, there would be a one-to-one relationship between the dimensions of the underlying affective space and the number of sliders on the interface. The Dynamic Emotion Wheel also adopted two dimensions for usability constraints: it was considered important that expressing an emotion would not take too much time and effort. As described in Section \@ref(instrumental-awareness), though, there is a growing consensus in considering that the time and effort in producing and consuming awareness should not be evaluated in absolute terms, but in a relative trade-off, which accounts for the instrumentality of the information provided in helping learners to improve their learning processes and outcomes. The number of dimensions should therefore be a pedagogical and/or theoretical decision, not imposed a priori by the interface of the tool. This is particularly relevant for two reasons.

On the one hand, it has been shown in Part I that emotion theories and researchers adopts very different conceptualization of emotion, ranging from a uni-dimensional structure (*positive* vs. *negative* emotions) to the multiple sequential evaluation checks of the Component Process Model listed in Section \@ref(cpm-appraisal-module). Empirical evidence gathered in the last decade has also highlighted how two dimensions are not enough to account for the variety of emotional experiences [@fontaineWorldEmotionsNot2007; @gilliozMappingEmotionTerms2016; @gentschEffectsAchievementContexts2017; @fontaineComponentsEmotionalMeaning2013]. In an attempt to provide a working definition of emotion, for instance, among seven defining features, Mulligan and Scherer [-@mulliganWorkingDefinitionEmotion2012, p. 346] proposes that "$x$ is an emotion *only if* [...] $x$ is triggered by at least one appraisal, and $x$ is guided by at least one appraisal". Congruently with appraisal theories of emotion, thus, appraisal is a necessary, even if not sufficient, condition for emotion to emerge. The working definition clearly states that one appraisal is necessary, but also leaves open the possibility that two or more appraisals are eligible.

On the other hand, even when the same number of dimensions are considered, there is no agreement on what these dimensions should be, across and within families of emotion theories (Section \@ref(theories-of-emotion)). Taking two-dimensional affective spaces as an example, we can identify at least (1) the ubiquitous Valence x Arousal dimensions [@russellCircumplexModelAffect1980; @russellPanculturalAspectsHuman1983; @stanleyTwodimensionalAffectiveSpace2009] used for instance by the *emot-control* [@feidakisProvidingEmotionAwareness2014; @feidakis2013] and Mood Meter application [@brackettRULERTheoryDrivenSystemic2019; @hoffmannTeachingEmotionRegulation2020; @nathansonCreatingEmotionallyIntelligent2016]; (2) the Valence x Control/Power dimensions of the Geneva Emotion Wheel [@schererWhatAreEmotions2005; @schererGRIDMeetsWheel2013; @shumanConceptsStructuresEmotions2014]; or (3) Pekrun's Control x Value dimensions for appraisal emotions [@pekrunControlValueTheoryAchievement2014; @pekrunControlValueTheoryAchievement2006].

The choice of the number and kind of the underlying dimensions delimiting the *reference frame* of the affective space is all the more relevant in an interface that prompts respondents to evaluate actively the dimensions. As highlighted in Section \@ref(dew-interface), using a slider to evaluate the dimension(s) implies some form of description of what respondents are asked to rate.

Second, the number of lexicalized emotions representing the subjective feelings does not have to be bound to 20, nor the suggestion of the most likely options to three as in the prototype of the DEW. Once again, it should be up to the researcher or practitioner to decide whether emotion differentiation is an important part of the process [@erbasRoleValenceFocus2015; @moorsAppraisalTheoriesEmotion2013]. For instance the EMORE-L tool by @molinariEMORELOutilReporting2016 comprises 8 discrete emotions, whereas the digital version of the Mood Meter application linked to the RULER approach [@brackettRULERTheoryDrivenSystemic2019; @hoffmannTeachingEmotionRegulation2020] allows respondents to choose between 100 lexicalized emotions.

### Computational Models of Emotion

-   $E$ stands for *Appraisal **E**valuation*, that is, the hypothetical value that a cognitive evaluation can have on a given set of appraisal criteria {$E_1$, $E_2$, ..., $E_i$}. In concrete terms, $E$ represents the rating of a person asked to evaluate one or more appraisal dimensions. For instance, if there was only one appraisal, *Novelty* for instance, than $E$ assumes a value determined by the extent to which the person evaluates the event as sudden, familiar or unpredictable on $E_1$.
-   $P$ stands for *Subjective Feeling **P**redicted Appraisal*, that is, the predicted appraisal profile associated with a given subjective feeling, with subscripts {$P_1$, $P_2$, ..., $P_j$} representing a set of $j$ predicted appraisal criteria. In concrete terms, $P$ represents the appraisal profile that is supposed to elicit the given subjective feeling. For instance, the CPM predicts that a subjective feeling represented by the word *Happiness* may be related to a higher evaluation on *Novelty* appraisal groups compared to a subjective feeling represented by the word *Sadness* [@schererComponentProcessModel2010].
-   As a consequence, $\Delta(E, P)$ represents the distance between the Appraisal Evaluation and the Subjective Feeling Predicted Appraisal, with the *k-nearest neighbors* being the *k* subjective feelings with the lowest $\Delta(E, P)$. In other words, if $k=5$, then, among all the subjective feelings in the affective space, the 5 whose appraisal profile $P$ is closer to the appraisal evaluation $E$ represent the subset of most likely subjective feelings to occur, given the *mysterious* point $E$, which is provided by the person cognitive evaluation.

The following subsections illustrates how the distance $\Delta(E, P)$ is calculated by the model depending on the number of appraisal criteria/dimensions composing the underlying affective space: one-dimensional, two-dimensional, or multi-dimensional. The presence of a specific section on a two-dimensional affective space, which is in fact the first multi-dimensional condition, is due to the possibility of interpreting the affective space either as a circumplex or as a Cartesian plane, which require a slightly different computation.

## One-Dimensional Affective Spaces

In a one-dimensional affective space, where there is only a single appraisal criterion, the nearest neighbors are determined by the absolute distance between $E$ and $P$:

$$
\Delta(E, P) = |E_1 - P_1|
$$

One-dimensional affective space are not usually defined as such in the literature, even though the possibility to conceptualize emotion on a single dimension is not infrequent, especially when this dimension represents an omnibus *valence* that often divides emotion in positive and negative. The possibility to use a one-dimensional affective space is therefore warranted by the working definition itself (*i.e.*, *at least one appraisal*), as well as by researchers and practitioners habit to recur to a dichotomous affective space, even though the actual rating may be implicit rather than explicit, for instance in grouping forced choices [@molinariEmotionFeedbackComputermediated2013].

The possibility to restrain the affective space to a single dimension may also be useful in situations where researchers or practitioners are interested specifically in the assessment of only one criterion, avoiding thus the mediation or moderation effects of additional criteria. For instance, if one is interested in the *normative significance*, more specifically with respect to *external standards* -- whether the event violated laws or socially accepted norms [@schererWhatAreEmotions2005] -- the presence of another appraisal criteria such as *valence*, may influence that evaluation. For example, negatively valenced emotion may be considered less socially acceptable [@vankleefInterpersonalDynamicsEmotion2018]. The presence of an explicit reminder of the valence could therefore mediate or moderate the rating of the external standard of normative significance.

## Two-Dimensional Affective Spaces

Two-dimensional, or bi-dimensional affective spaces are ubiquitous in research, especially in the form of the dimensional *Valence x Arousal* circumplex [@russellCircumplexModelAffect1980], but also in appraisal-driven perspectives, as in Pekrun's Control-Value theory of achievement emotions [@pekrunControlValueTheoryAchievement2006; @pekrunControlValueTheoryAchievement2014] or the V*alence x Control/Power* structure of the Geneva Emotion Wheel [@schererGRIDMeetsWheel2013; @schererWhatAreEmotions2005]. Several scholars have theoretically adopted two-dimensional affective spaces in their research, but also as graphical representations for self-report/awareness tools [*e.g.*, @feidakisEndowingElearningSystems2011]. Consequently, it is important that an overarching computational model can manage to incorporate different kinds of two-dimensional affective spaces. In this regard, an affective space based on two dimensions can be interpreted as the sum of a pair of one-dimensional continuous spaces, in which case each subjective feeling is determined by a precise coordinate in a Cartesian plane. Alternatively, it may also be interpreted, less stringently, as a circumplex where each subjective feeling is positioned at an equal distance from the origin. The two interpretations of a two-dimensional affective space, depicted in Figure ..., require different computational models from a *k-nearest neighbors* perspectives. This subsection first illustrates the computational model for a Cartesian plane, and then for a circumplex. Last, it compares the two computational models in a simulation using the same affective space depicted either as a Cartesian plane or a circumplex.

(ref:two-dimensional-affective-spaces-caption) Comparison between a two-dimensional affective space for which the *reference frame* is a Cartesian plane (left) or a circumplex (right). The X and Y values corresponds to the $E_1$ and $E_2$ values respectively.

```{r two-dimensional-affective-spaces, fig.align="center", fig.cap="(ref:two-dimensional-affective-spaces-caption)", out.width="48%", fig.show="hold"}
knitr::include_graphics(
  c(
    here::here("./figure/dew/dew-vector-distance.png"),
    here::here("./figure/dew/dew-radial-distance.png")
  )
)
```

### Cartesian Plane Affective Space

When a second appraisal criteria is added, the resulting affective space can be conceptualized as a Cartesian plane, in which $P$ is represented by the coordinates $x = P_1$, and $y = P_2$. At the same time, the appraisal evaluation is also determined by coordinates $x = E_1$ and $y = E_2$. Consequently, the *k-nearest neighbors* may be determined using the Euclidean (or Pythagorean) distance, with the nearest subjective feelings having the smallest hypotenuse of a triangle with the length of the sides determined by the difference between $E_1$ and $P_1$, and $E_2$ and $P_2$:

$$
\Delta(E, P) = \sqrt{(E_1 - P_1)^2 + (E_2 - P_2)^2}
$$

### Circumplex Affective Space

An alternative for two-dimensional affective spaces consists in the use of a circumplex, a representation that is mainly linked with the concept of core-affect emerging from a *Valence x Arousal* space in constructivist/dimensional emotion theories [@russellCoreAffectPsychological2003; @russellEmotionCoreAffect2009; @stanleyTwodimensionalAffectiveSpace2009]. The structure itself, though, may also be adopted in other contexts, since a circumplex allows researchers to dispose multiple variables on a circle, so that the similarity between two items is inversely proportional to their distance on the circumference: the less the distance, the more the two elements are similar or correlated. The circumplex is determined by an x-axis and a y-axis, usually delimited by opposite poles of the same constructs (*e.g.*, pleasant/unpleasant) or two constructs in antithesis (*e.g.* sadness/enthusiasm). The combination of the two axes creates four quadrants, usually crossing over the negative and positive poles of the two axes. The top-right quadrant is x-positive and y-positive; the bottom-right quadrant is x-positive and y-negative; the bottom-left quadrant is x-negative and y-negative; and the top-left quadrant is x-negative and y-positive.

Given its practical structure, a circumplex ca be used to dispose subjective feelings determined by two appraisals criteria in a more *relaxed* way compared to a Cartesian plane. In fact, researchers can tentatively dispose items at an equal distance from each other, assuming the order of disposition on the circle as a sufficient connotation of the affective space. Since the computational model, though, does not use the circumplex as a graphical representation, but rather as a *database* to retrieve suggestions, the fact that subjective feelings are not equally spaced on the circumference is irrelevant from a usability standpoint. As a consequence, it is also possible to adopt circumplexes with overlapping subjective feelings, or where the distance between any two items on the circle is not necessarily the same, but rather a function of some theoretical or practical mechanism.

On the other hand, the use of a circumplex as the underlying affective space requires a slightly different approach in computing the distance between $E$ and $P$, because $P$ in a circumplex is best conveyed as an angle, so that $P_{angle} \in \mathbb{R} : 0 \le P_{angle} \le 360$. A possible solution is to use $E_1$ and $E_2$ as points in a Cartesian plane, and compute the slope from the origin [0,0] of the plane. The slope can then be used to retrieve the angle from the x-axis, using the inverse tangent, or arctangent trigonometric function, and -- with some correction skipped here, see Fritz (2015) or the code repository for more details -- also obtain an $E_{angle} \in \mathbb{R} : 0 \le E_{angle} \le 360$:

$$
E_{angle} = arctan(\frac{E_1 - 0}{E_2 - 0}) + correction = arctan(\frac{E_1}{E_2}) + correction
$$

Once retrieved the $E_{angle}$, the *k-nearest neighbors* can be determined using the same logic as in a uni-dimensional condition, by computing the absolute distance between $E_{angle}$ and $P_{angle}$:

$$
\Delta(E, P) = |E_{angle} - P_{angle}|
$$ Conceptually, with this solution, it is worth considering the case when both $E_1$ and $E_2$ are at the neutral point 0, since $\Delta(E, P)$ is exactly the same for every subjective feeling, since any point on a circle is at the same distance from the origin. In other words, any subjective feeling is as likely to represent the neutral point as any other. When both $E_1$ and $E_2$ are 0, thus, the computational model attributes a virtual random value both to $E_1$ and $E_2$ only with the purpose to shuffle the set of subjective feelings and avoid thus that some subjective feelings are arbitrarily suggested more frequently with the neutral point.

### Comparison

Taking advantage of the fact that the disposition of the 20 subjective feelings in the third version of the Geneva Emotion Wheel [@schererGRIDMeetsWheel2013] has been determined using the GRID instrument, the same affective space is available as a circumplex and as a Cartesian plane. As a consequence, it is possible to simulate the behavior of the computational model. For the purpose of the simulation, the following parameters will be adopted:

-   The two appraisal dimensions (Valence and Control/Power) are implemented on a continuum ranging from -100 to 100, divided in steps of 1 unit;
-   The *k*-nearest neighbors is set to $k = 3$ and to $k = 10$ to assess how the radial and the vector algorithms behave when the number of suggested feelings varies;
-   The subjective feelings in the circumplex affective space are disposed so that each is equally distant from the previous and the following item, with a rotation of half the distance between each subjective feeling to respect the graphical representation of the circumplex, see the right side of Figure \@ref(fig:pof-gew-radial-vs-vector);
-   The subjective feelings in the Cartesian plan are disposed according to the values retrieved from data available in @schererGRIDMeetsWheel2013, see the left side of Figure \@ref(fig:pof-gew-radial-vs-vector). The original value on a range from -1 to 1 has been multiplied by 100 to map the range of the simulation.

(ref:pof-gew-radial-vs-vector-caption) Disposition of the Geneva Emotion Wheel's 20 subjective feeling on a circumplex (left) and Cartesian plane (right) affective space. Reconstructed from @schererGRIDMeetsWheel2013.

```{r pof-gew-radial-vs-vector, fig.align="center", fig.cap="(ref:pof-gew-radial-vs-vector-caption)", fig.align="center", out.width="100%"}
knitr::include_graphics(here("figure/dew-rt/gew-radial-vs-vector.png"))
```

The simulation is computed by looping the $E_1$ and $E_2$ ranges so that each possible combination between the two -- that is, [-100, -100], [-100, -99], ..., [0, 0], ..., [100, 100] -- generates a subset of $k = 3$ or $k = 10$ subset of subjective feelings. Figure \@ref(fig:pf-simulation-3) and \@ref(fig:pf-simulation-3) show the results of the simulation. With a $k = 3$ subset, the radial distance of the circumplex shows a more homogeneous number of appearances of each subjective feeling in the subset compared to the vector distance of the Cartesian plane. The opposite happens with $k = 10$, where the vector distance results in more homogeneous number of appearances compared to the radial distance.

(ref:pof-simulation-3-caption) Results of the simulation comparing distance computed as a radial or vector distance with a subset of $k = 3$ subjective feelings.

```{r pf-simulation-3, fig.align="center", fig.cap="(ref:pof-simulation-3-caption)", fig.align="center", out.width="70%"}
dew_rt.sim_gew_graph_3
```

(ref:pof-simulation-10-caption) Results of the simulation comparing distance computed as a radial or vector distance with a subset of $k = 10$ subjective feelings.

```{r pof-simulation-10, fig.align="center", fig.cap="(ref:pof-simulation-10-caption)", fig.align="center", out.width="70%"}
dew_rt.sim_gew_graph_10
```

This simulation has only illustrative purpose, because the two affective spaces are only examples of an infinite number of spaces that can be conceived and therefore results may be very different with different configurations. Nevertheless, this kind of simulation may be interesting to carry out before adopting an affective space (see next chapter) to assess whether there are subjective feelings that are more likely to be suggested by the system, because that could influence learners in choosing them.

## Three-Dimensional Affective Spaces and Beyond

There is growing empirical evidence in suggesting that one- and two-dimensional affective spaces are not enough to account for the variety of emotional experiences in semantic terms [@fontaineWorldEmotionsNot2007; @gilliozMappingEmotionTerms2016]. As a consequence, an overarching computational model should be able to integrate higher-order dimensional spaces, where the number of dimensions can be determined by researchers and practitioners with respect to theoretical, practical, or usability criteria (*e.g.*, if the moment-to-moment temporal dimension is particularly important, asking learners to repeatedly rate a high number of criteria would be very time consuming).

Extending the model to more than two dimensions is relatively straightforward when the Euclidean distance is maintained as the algorithm to determine the *k-nearest neighbors*. In fact, it is possible to determine the distance between any two points in a multidimensional space simply by adding additional dimensions to the Pythagorean formula:

$$
\Delta(E, P) = \sqrt{(E_1- P_1)^2 + (E_2 - P_2)^2+\cdots+(E_n - P_n)^2}
$$

The model therefore remains fairly limited in term of computational power required, even if the number of dimensions increases. The difficulty with a higher-order affective spaces is in fact more conceptual than practical, since it is more difficult to imagine a space with three or more dimensions. Beyond three dimensions, it is even difficult to represent the space graphically, which contrasts with the easy-to-understand, and easy-to-implement disposition of subjective feelings in a circumplex. At the same time, the *k-nearest neighbor* approach can precisely contribute to overcome this issue, once a multi-dimensional affective space is established, since the dimensions are *flattened* on uni-dimensional ratings. The computational model is then in charge of mapping uni-dimensional ratings into multi-dimensional distances, as vectors between points in spaces the human mind can hardly imagine from a spatial point of view.

For instance, Gillioz and colleagues [-@gilliozMappingEmotionTerms2016] adopted the GRID instrument -- in its shorter CoreGRID version [@schererCoreGRIDMiniGRIDDevelopment2013] -- to assess the mapping of 80 emotion terms in an affective space. The authors found evidence, corroborating previous findings on a smaller set of emotion terms [@fontaineComponentsEmotionalMeaning2013; @fontaineWorldEmotionsNot2007], attesting the presence of a four-dimensional affective space, composed by *valence*, *power*, *arousal*, and *novelty*. The number of dimensions and of emotion terms composing the affective space empirically established by the authors is a representative example of how a parsimonious computational model could be deployed in a self-report instrument, allowing users to benefit of all the dimensions and all the suggested emotion terms.

## Summary

This chapter illustrated a parsimonious computational model that allows to regroup affective spaces expressed on multiple dimension into the same abstract functioning, harnessing a *k*-nearest neighbors approach.
